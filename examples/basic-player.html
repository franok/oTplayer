<h1><a href="https://github.com/franok/oTplayer">oTplayer</a> Basic Player (offline)</h1>

<!-- <p>Here's some URLs to try out:</p>
<input class="example-url" value="http://ejb.github.io/progressor.js/demos/echoplex.mp3">
<input class="example-url" value="https://www.youtube.com/watch?v=nkBQpoaDhF4">
<input class="example-url" value="http://ejb.github.io/progressor.js/demos/physics.mp4"> -->

<p><label>Enter URL of MP3, MP4 or YouTube here: &nbsp;&nbsp;<input id="url-input" size="60"></label><p>
<!-- <p>
    <label>Enter URL of MP3, MP4 or YouTube here: &nbsp;&nbsp;<input id="url-input" size="60"></label>
    <button onclick="">Load</button>
<p> -->

<div id="media"></div>

<div class="controls">

    <div id="player-hook"></div>
    <div id="player-time"></div>

    <button class="playPause">play/pause</button>
    &nbsp;&nbsp;
    <button class="play">play</button>
    <button class="pause">pause</button>
    &nbsp;&nbsp;
    <button class="back">back (D)</button>
    <button class="forward">forward (F)</button>
    &nbsp;&nbsp;
    <button class="speed-down">speed down</button>
    <button class="speed-up">speed up</button>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <button class="reset" style="background-color:red; color:white;">reset player</button>
    <div class="current-speed"></div>
</div>

<script src="./dependencies/jquery-1.11.1.min.js"></script>
<script src="./dependencies/progressor.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../dist/otplayer.js" type="text/javascript" charset="utf-8"></script>
<script>

    var opts = {
        container: $('#media')[0],
        skipTime: 1.5,
        startpoint: 0,
        buttons: {
            playPause: '.playPause'
        },
        onReady: function (e) {
            $('.controls').show();
        }
    }

    $(document).ready(function () {
        $("#url-input").focus();
    });

    $('#url-input').change(function () {
        if (window.player) {
            window.player.reset();
        }
        opts.source = $(this).val();
        if (window.player) { window.player.reset(); }
        window.player = new oTplayer(opts);
        $(".playPause").focus();
    });

    // causes problems
    // $("body").keydown(function(e) {
    //     if(e.keyCode == 32 && $(this).val().indexOf(' ') >= 0){
    //         // if spacebar already pressed
    //         return false;
    //     }
    //     if(e.keyCode == 32) { // spacebar
    //     $( ".playPause" ).trigger( "click" );
    //   }
    // });

    $('.play').click(function () {
        player.play();
    });

    $('.pause').click(function () {
        player.pause();
    });

    $('.back').click(function () {
        player.skip('back');
    });

    $("body").keydown(function (e) {
        if (e.keyCode == 37 || e.keyCode == 68) { // left || d
            player.skip('back');
        }
    });

    $('.forward').click(function () {
        player.skip('forward');
    });

    $("body").keydown(function (e) {
        if (e.keyCode == 39 || e.keyCode == 70) { // right || f
            player.skip('forward');
        }
    });

    $('.speed-up').click(function () {
        player.speed('up');
    });
    $('.speed-down').click(function () {
        player.speed('down');
    });
    $('.reset').click(function () {
        player.reset();
        $('.controls').hide();
        $('#url-input').val('');
    });

    setInterval(function () {
        if (window.player) {
            $('.current-speed').text('Speed: ' + window.player.getSpeed() + 'x');
        }
    }, 50);

</script>

<style>
    .example-url {
        width: 50%;
    }

    .controls {
        display: none;
        border: 1px solid #ddd;
        padding: 10px;
    }

    .progressor {
        height: 15px;
        width: 100%;
        background: #ccc;
    }

    .progressor-progress {
        height: 100%;
        background: #777;
    }
</style>